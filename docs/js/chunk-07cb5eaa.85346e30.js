(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07cb5eaa"],{"0660":function(e,r,t){"use strict";t("e27c")},"2d3b":function(e,r,t){"use strict";t.r(r);t("b0c0");var a=t("7a23"),n=Object(a["P"])("data-v-69c87926");Object(a["w"])("data-v-69c87926");var c={id:"search"},i={class:"search-container"},d={class:"nav-container"},o={key:0,class:"order-container"},u={class:"order-form"},s=Object(a["i"])("h4",null,"快速選項",-1),l={class:"options-container"},b=Object(a["i"])("br",null,null,-1);Object(a["u"])();var O=n((function(e,r,t,n,O,j){var v=Object(a["B"])("OrderingInfo");return Object(a["t"])(),Object(a["e"])("div",c,[Object(a["i"])("div",i,[Object(a["M"])(Object(a["i"])("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=function(r){return e.inputRefKey=r}),placeholder:"訂單編號"},null,512),[[a["I"],e.inputRefKey]]),Object(a["i"])("div",{id:"input-refKey",class:"search-btn",onClick:r[2]||(r[2]=function(){return e.searchOrder&&e.searchOrder.apply(e,arguments)})},"Search")]),Object(a["i"])("div",d,[Object(a["i"])("div",{class:["nav-btn",{active:1===e.view&&""!==e.order.data}],onClick:r[3]||(r[3]=function(r){return e.view=1})},"我要訂購",2),Object(a["i"])("div",{class:["nav-btn",{active:2===e.view&&""!==e.order.data}],onClick:r[4]||(r[4]=function(r){return e.view=2})},"訂單明細",2)]),1===e.view&&""!==e.order.data?(Object(a["t"])(),Object(a["e"])("div",o,[Object(a["i"])("h2",null,"訂單: "+Object(a["E"])(e.order.data.name),1),Object(a["i"])("div",u,[Object(a["M"])(Object(a["i"])("input",{type:"text","onUpdate:modelValue":r[5]||(r[5]=function(r){return e.userOrdering.data.username=r}),placeholder:"訂購人 (選填)"},null,512),[[a["I"],e.userOrdering.data.username]]),s,Object(a["i"])("div",l,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["z"])(e.order.data.options,(function(r,t){return Object(a["t"])(),Object(a["e"])("div",{class:"option",key:r,onClick:function(r){return e.addToOrderings(t)}},Object(a["E"])(r),9,["onClick"])})),128))]),Object(a["M"])(Object(a["i"])("textarea",{cols:"40",rows:"4","onUpdate:modelValue":r[6]||(r[6]=function(r){return e.userOrdering.data.ordering=r}),placeholder:"目前不支援選擇數量，請手動標記；例: 奶茶x2"},null,512),[[a["I"],e.userOrdering.data.ordering]]),b,Object(a["M"])(Object(a["i"])("textarea",{cols:"40",rows:"4","onUpdate:modelValue":r[7]||(r[7]=function(r){return e.userOrdering.data.ps=r}),placeholder:"備註 (選填)"},null,512),[[a["I"],e.userOrdering.data.ps]]),Object(a["i"])("div",{class:"update-btn",onClick:r[8]||(r[8]=function(){return e.updateOrder&&e.updateOrder.apply(e,arguments)})},"送出")])])):Object(a["f"])("",!0),Object(a["M"])(Object(a["i"])(v,{orderData:e.order.data,refKey:e.inputRefKey},null,8,["orderData","refKey"]),[[a["J"],2===e.view]])])})),j=(t("498a"),t("caad"),t("2532"),t("6c42")),v=Object(a["P"])("data-v-30a1bc84");Object(a["w"])("data-v-30a1bc84");var p={id:"ordering-info"},f=Object(a["i"])("h2",null,"訂單明細",-1),g=Object(a["i"])("hr",null,null,-1),m=Object(a["i"])("br",null,null,-1),h={class:"notice"};Object(a["u"])();var y=v((function(e,r,t,n,c,i){return Object(a["t"])(),Object(a["e"])("div",p,[f,Object(a["i"])("p",null,Object(a["E"])(e.orderData.name),1),Object(a["i"])("p",null,Object(a["E"])(e.orderData.create),1),"None"!==e.orderData.name?(Object(a["t"])(),Object(a["e"])("img",{key:0,id:"qrcode-img",src:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://proladon.github.io/WUO.io/%23/search/"+e.refKey,alt:""},null,8,["src"])):Object(a["f"])("",!0),g,(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["z"])(e.orderData.orderings,(function(r,t){return Object(a["t"])(),Object(a["e"])("div",{class:"ordering-item",key:r},[Object(a["i"])("p",null,[Object(a["i"])("strong",null,Object(a["E"])(r.username),1)]),Object(a["i"])("span",null,Object(a["E"])(r.ordering),1),m,Object(a["i"])("span",h,"備註: "+Object(a["E"])(r.ps),1),Object(a["i"])("span",{class:"delete",onClick:function(r){return e.removeOrdering(t)}},"×",8,["onClick"])])})),128))])})),w=(t("a434"),t("a4c9")),k=Object(a["j"])({name:"OrderingInfo",props:["orderData","refKey"],setup:function(e){var r=function(r){var t=confirm("確定刪除此筆訂購嗎");if(t){var a=w["a"].database().ref("orders/"+e.refKey),n=e.orderData.orderings;n.splice(r,1),a.update({orderings:n})}};return{removeOrdering:r}}});t("37ab");k.render=y,k.__scopeId="data-v-30a1bc84";var K=k,x=Object(a["j"])({name:"Search",props:["refKey"],components:{OrderingInfo:K},setup:function(e){var r=Object(j["b"])(),t=Object(a["y"])(),n=Object(a["y"])(2),c=Object(a["x"])({data:{username:"",ordering:"",ps:""}}),i=Object(a["x"])({data:{name:"None",options:""}}),d=function(){w["a"].database().ref("orders/"+t.value).on("value",(function(e){var a;if(t.value&&""!==(null===(a=t.value)||void 0===a?void 0:a.trim()))if(e.exists()){var n=e.val();i.data=n}else r.error("查無此訂單");else r.warning("請輸入訂單編號")}))},o=function(e){var r=i.data.options[e],t=c.data.ordering;t.includes(r)||(c.data.ordering+=r+"、")},u=function(){if("None"!==i.data.name)if(""!==c.data.ordering.trim()){var e=w["a"].database().ref("orders/"+t.value);e.get().then((function(t){if(t.val().orderings){var a=t.val().orderings;a.push(c.data),e.update({orderings:a})}else{var i=[c.data];e.update({orderings:i})}r.success("已新增訂購!"),c.data.username="",c.data.ordering="",c.data.ps="",n.value=2}))}else r.error("訂購品項請勿留空");else r.error("訂單不存在")};return Object(a["r"])((function(){""!==t.value&&(t.value=e.refKey,e.refKey&&d())})),{view:n,inputRefKey:t,searchOrder:d,order:i,updateOrder:u,userOrdering:c,addToOrderings:o}}});t("0660");x.render=O,x.__scopeId="data-v-69c87926";r["default"]=x},"37ab":function(e,r,t){"use strict";t("cd08")},cd08:function(e,r,t){},e27c:function(e,r,t){}}]);
//# sourceMappingURL=chunk-07cb5eaa.85346e30.js.map