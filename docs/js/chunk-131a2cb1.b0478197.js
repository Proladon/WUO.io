(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-131a2cb1"],{"053e":function(e,r,t){"use strict";t("a0d4")},"08de":function(e,r,t){"use strict";t("ea50")},"1dde":function(e,r,t){var n=t("d039"),a=t("b622"),c=t("2d00"),i=a("species");e.exports=function(e){return c>=51||!n((function(){var r=[],t=r.constructor={};return t[i]=function(){return{foo:1}},1!==r[e](Boolean).foo}))}},2532:function(e,r,t){"use strict";var n=t("23e7"),a=t("5a34"),c=t("1d80"),i=t("ab13");n({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(c(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(e,r,t){"use strict";t.r(r);t("b0c0");var n=t("7a23"),a=Object(n["P"])("data-v-54f372a4");Object(n["w"])("data-v-54f372a4");var c={id:"search"},i={class:"search-container"},o={class:"nav-container"},d={key:0,class:"order-container"},u={class:"order-form"},s=Object(n["i"])("h4",null,"快速選項",-1),l={class:"options-container"},f=Object(n["i"])("br",null,null,-1);Object(n["u"])();var b=a((function(e,r,t,a,b,O){var p=Object(n["B"])("OrderingInfo");return Object(n["t"])(),Object(n["e"])("div",c,[Object(n["i"])("div",i,[Object(n["M"])(Object(n["i"])("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=function(r){return e.inputRefKey=r}),placeholder:"訂單編號"},null,512),[[n["I"],e.inputRefKey]]),Object(n["i"])("div",{id:"input-refKey",class:"search-btn",onClick:r[2]||(r[2]=function(){return e.searchOrder&&e.searchOrder.apply(e,arguments)})},"Search")]),Object(n["i"])("div",o,[Object(n["i"])("div",{class:["nav-btn",{active:1===e.view&&""!==e.order.data}],onClick:r[3]||(r[3]=function(r){return e.view=1})},"我要訂購",2),Object(n["i"])("div",{class:["nav-btn",{active:2===e.view&&""!==e.order.data}],onClick:r[4]||(r[4]=function(r){return e.view=2})},"訂單明細",2)]),1===e.view&&""!==e.order.data?(Object(n["t"])(),Object(n["e"])("div",d,[Object(n["i"])("h2",null,"訂單: "+Object(n["E"])(e.order.data.name),1),Object(n["i"])("div",u,[Object(n["M"])(Object(n["i"])("input",{type:"text","onUpdate:modelValue":r[5]||(r[5]=function(r){return e.userOrdering.data.username=r}),placeholder:"訂購人 (選填)"},null,512),[[n["I"],e.userOrdering.data.username]]),s,Object(n["i"])("div",l,[(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.order.data.options,(function(r,t){return Object(n["t"])(),Object(n["e"])("div",{class:"option",key:r,onClick:function(r){return e.addToOrderings(t)}},Object(n["E"])(r),9,["onClick"])})),128))]),Object(n["M"])(Object(n["i"])("textarea",{"onUpdate:modelValue":r[6]||(r[6]=function(r){return e.userOrdering.data.ordering=r}),placeholder:"目前不支援選擇數量，請手動標記；例: 奶茶x2"},null,512),[[n["I"],e.userOrdering.data.ordering]]),f,Object(n["M"])(Object(n["i"])("textarea",{"onUpdate:modelValue":r[7]||(r[7]=function(r){return e.userOrdering.data.ps=r}),placeholder:"備註 (選填)"},null,512),[[n["I"],e.userOrdering.data.ps]]),Object(n["i"])("div",{class:"update-btn",onClick:r[8]||(r[8]=function(){return e.updateOrder&&e.updateOrder.apply(e,arguments)})},"送出")])])):Object(n["f"])("",!0),Object(n["M"])(Object(n["i"])(p,{orderData:e.order.data,refKey:e.inputRefKey},null,8,["orderData","refKey"]),[[n["J"],2===e.view]])])})),O=(t("498a"),t("caad"),t("2532"),t("6c42")),p=t("6c02"),v=Object(n["P"])("data-v-4fecc7d8");Object(n["w"])("data-v-4fecc7d8");var j={id:"ordering-info"},g=Object(n["i"])("h2",null,"訂單明細",-1),h=Object(n["i"])("hr",null,null,-1),y=Object(n["i"])("br",null,null,-1),m={class:"notice"};Object(n["u"])();var w=v((function(e,r,t,a,c,i){return Object(n["t"])(),Object(n["e"])("div",j,[g,Object(n["i"])("p",null,Object(n["E"])(e.orderData.name),1),Object(n["i"])("p",null,Object(n["E"])(e.orderData.create),1),"None"!==e.orderData.name?(Object(n["t"])(),Object(n["e"])("img",{key:0,id:"qrcode-img",src:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://proladon.github.io/WUO.io/%23/search/"+e.refKey.trim(),alt:""},null,8,["src"])):Object(n["f"])("",!0),h,(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.orderData.orderings,(function(r,t){return Object(n["t"])(),Object(n["e"])("div",{class:"ordering-item",key:r},[Object(n["i"])("p",null,[Object(n["i"])("strong",null,Object(n["E"])(r.username),1)]),Object(n["i"])("span",null,Object(n["E"])(r.ordering),1),y,Object(n["i"])("span",m,"備註: "+Object(n["E"])(r.ps),1),Object(n["i"])("span",{class:"delete",onClick:function(r){return e.removeOrdering(t)}},"×",8,["onClick"])])})),128))])})),x=(t("a434"),t("a4c9")),k=Object(n["j"])({name:"OrderingInfo",props:["orderData","refKey"],setup:function(e){var r=function(r){var t=confirm("確定刪除此筆訂購嗎");if(t){var n=x["a"].database().ref("orders/"+e.refKey.trim()),a=e.orderData.orderings;a.splice(r,1),n.update({orderings:a})}};return{removeOrdering:r}}});t("08de");k.render=w,k.__scopeId="data-v-4fecc7d8";var K=k,E=Object(n["j"])({name:"Search",props:["refKey"],components:{OrderingInfo:K},setup:function(e){var r=Object(p["c"])(),t=Object(O["b"])(),a=Object(n["y"])(),c=Object(n["y"])(2),i=Object(n["x"])({data:{username:"",ordering:"",ps:""}}),o=Object(n["x"])({data:{name:"None",options:""}}),d=function(){var e,n=null===(e=a.value)||void 0===e?void 0:e.trim();r.push("/search/"+n),x["a"].database().ref("orders/"+n).on("value",(function(e){if(n&&""!==n)if(e.exists()){var r=e.val();o.data=r}else t.error("查無此訂單");else t.warning("請輸入訂單編號")}))},u=function(e){var r=o.data.options[e],t=i.data.ordering;t.includes(r)||(i.data.ordering+=r+"、")},s=function(){if("None"!==o.data.name)if(""!==i.data.ordering.trim()){var e=x["a"].database().ref("orders/"+a.value);e.get().then((function(r){if(r.val().orderings){var n=r.val().orderings;n.push(i.data),e.update({orderings:n})}else{var a=[i.data];e.update({orderings:a})}t.success("已新增訂購!"),i.data.username="",i.data.ordering="",i.data.ps="",c.value=2}))}else t.error("訂購品項請勿留空");else t.error("訂單不存在")};return Object(n["r"])((function(){""!==a.value&&(a.value=e.refKey,e.refKey&&d(),Object(n["o"])((function(){window.scrollTo(0,1),window.scrollTo(0,0)})))})),{view:c,inputRefKey:a,searchOrder:d,order:o,updateOrder:s,userOrdering:i,addToOrderings:u}}});t("053e");E.render=b,E.__scopeId="data-v-54f372a4";r["default"]=E},"5a34":function(e,r,t){var n=t("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"65f0":function(e,r,t){var n=t("861d"),a=t("e8b5"),c=t("b622"),i=c("species");e.exports=function(e,r){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?n(t)&&(t=t[i],null===t&&(t=void 0)):t=void 0),new(void 0===t?Array:t)(0===r?0:r)}},8418:function(e,r,t){"use strict";var n=t("c04e"),a=t("9bf2"),c=t("5c6c");e.exports=function(e,r,t){var i=n(r);i in e?a.f(e,i,c(0,t)):e[i]=t}},a0d4:function(e,r,t){},a434:function(e,r,t){"use strict";var n=t("23e7"),a=t("23cb"),c=t("a691"),i=t("50c4"),o=t("7b0b"),d=t("65f0"),u=t("8418"),s=t("1dde"),l=s("splice"),f=Math.max,b=Math.min,O=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!l},{splice:function(e,r){var t,n,s,l,v,j,g=o(this),h=i(g.length),y=a(e,h),m=arguments.length;if(0===m?t=n=0:1===m?(t=0,n=h-y):(t=m-2,n=b(f(c(r),0),h-y)),h+t-n>O)throw TypeError(p);for(s=d(g,n),l=0;l<n;l++)v=y+l,v in g&&u(s,l,g[v]);if(s.length=n,t<n){for(l=y;l<h-n;l++)v=l+n,j=l+t,v in g?g[j]=g[v]:delete g[j];for(l=h;l>h-n+t;l--)delete g[l-1]}else if(t>n)for(l=h-n;l>y;l--)v=l+n-1,j=l+t-1,v in g?g[j]=g[v]:delete g[j];for(l=0;l<t;l++)g[l+y]=arguments[l+2];return g.length=h-n+t,s}})},ab13:function(e,r,t){var n=t("b622"),a=n("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(n){}}return!1}},caad:function(e,r,t){"use strict";var n=t("23e7"),a=t("4d64").includes,c=t("44d2");n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),c("includes")},e8b5:function(e,r,t){var n=t("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},ea50:function(e,r,t){}}]);
//# sourceMappingURL=chunk-131a2cb1.b0478197.js.map